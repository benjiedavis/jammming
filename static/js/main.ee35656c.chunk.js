(this.webpackJsonpjammming=this.webpackJsonpjammming||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(20)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(7),c=a.n(r),o=(a(13),a(2)),i=a(3),l=a(1),u=a(5),h=a(4),m=(a(14),a(15),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleSearch=n.handleSearch.bind(Object(l.a)(n)),n.handleTermChange=n.handleTermChange.bind(Object(l.a)(n)),n.state={term:""},n}return Object(i.a)(a,[{key:"handleSearch",value:function(e){this.props.search(this.state.term),e.preventDefault()}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{className:"SearchBar"},s.a.createElement("input",{placeholder:"Enter A Song, Album, or Artist",onChange:this.handleTermChange}),s.a.createElement("button",{onClick:this.handleSearch,className:"SearchButton"},"SEARCH"))}}]),a}(s.a.Component)),p=(a(16),a(17),a(18),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).addTrack=n.addTrack.bind(Object(l.a)(n)),n.removeTrack=n.removeTrack.bind(Object(l.a)(n)),n.renderAction=n.renderAction.bind(Object(l.a)(n)),n}return Object(i.a)(a,[{key:"addTrack",value:function(e){this.props.onAdd(this.props.track)}},{key:"removeTrack",value:function(e){console.log("HERE"),this.props.onRemove(this.props.track)}},{key:"renderAction",value:function(e,t){return"true"===e?s.a.createElement("button",{className:"Track-action",onClick:this.removeTrack},"-"):s.a.createElement("button",{onClick:this.addTrack,className:"Track-action"},"+")}},{key:"render",value:function(){return s.a.createElement("div",{className:"Track"},s.a.createElement("div",{className:"Track-information"},s.a.createElement("h3",null,this.props.track.name),s.a.createElement("p",null,this.props.track.artist," | ",this.props.track.album)),this.renderAction(this.props.isRemoval,this.props.track))}}]),a}(s.a.Component)),d=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.tracks?Array.from(this.props.tracks):[];return s.a.createElement("div",{className:"TrackList"},t.map((function(t){return s.a.createElement(p,{key:t.id,track:t,isRemoval:e.props.isRemoval,onAdd:e.props.onAdd,onRemove:e.props.onRemove})})))}}]),a}(s.a.Component),f=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"SearchResults"},s.a.createElement("h2",null,"Results"),s.a.createElement(d,{tracks:this.props.searchResults,onAdd:this.props.onAdd,isRemoval:"false"}))}}]),a}(s.a.Component),k=(a(19),function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleNameChange=n.handleNameChange.bind(Object(l.a)(n)),n}return Object(i.a)(a,[{key:"handleNameChange",value:function(e){this.props.onNameChange(e.target.value),e.preventDefault()}},{key:"render",value:function(){return s.a.createElement("div",{className:"Playlist"},s.a.createElement("input",{defaultValue:"New Playlist",onChange:this.handleNameChange}),s.a.createElement(d,{tracks:this.props.playlistTracks,onRemove:this.props.onRemove,isRemoval:"true"}),s.a.createElement("button",{className:"Playlist-save",onClick:this.props.onSave},"SAVE TO SPOTIFY"))}}]),a}(s.a.Component)),v="",y="",b="http://localhost:3000/";console.log("env"),console.log("production"),b="https://benjiedavis.github.io/jammming/";var T="",g={getAccessToken:function(){return""!==v?(console.log("A"),v):(T=window.location.href,console.log("HEREMATCH"),console.log(T.match(/access_token=([^&]*)/)),T.match(/access_token=([^&]*)/)?(v=T.match(/access_token=([^&]*)/)[1],y=T.match(/expires_in=([^&]*)/)[1],window.setTimeout((function(){return v=""}),1e3*y),window.history.pushState("Access Token",null,"/"),console.log("B"),v):(window.location.href="https://accounts.spotify.com/authorize?client_id=".concat("baf26983f8564dce9393d1eb5ad74749","&response_type=token&scope=playlist-modify-public&redirect_uri=").concat(b),console.log("C"),T=window.location.href,v=T.match(/access_token=([^&]*)/)[1],y=T.match(/expires_in=([^&]*)/)[1],window.setTimeout((function(){return v=""}),1e3*y),window.history.pushState("Access Token",null,"/"),v))},search:function(e){return v=this.getAccessToken(),fetch("https://cors-anywhere.herokuapp.com/https://api.spotify.com/v1/search?type=track&q=".concat(e),{headers:{Authorization:"Bearer ".concat(v)}}).then((function(e){return e.json()})).then((function(e){if(e.tracks)return e.tracks.items.map((function(e){return{id:e.id,name:e.name,artist:e.artists[0].name,album:e.album.name,uri:e.uri}}))}))},getUserId:function(){return v=this.getAccessToken(),fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer ".concat(v)}}).then((function(e){return e.json()})).then((function(e){return e.id}))},getPlaylistId:function(e,t){return v=this.getAccessToken(),console.log("name:"),console.log(e),fetch("https://api.spotify.com/v1/users/".concat(t,"/playlists"),{method:"post",headers:{Authorization:"Bearer ".concat(v),"Content-Type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){return console.log("playlist idjson:"),console.log(e),e.json()})).then((function(e){return e.id}))},addTracks:function(e,t){return v=this.getAccessToken(),fetch("https://api.spotify.com/v1/playlists/".concat(e,"/tracks"),{headers:{Authorization:"Bearer ".concat(v),"Content-Type":"application/json"},method:"post",body:JSON.stringify({uris:t})})},savePlaylist:function(e,t){var a=this;v=this.getAccessToken(),e&&t?this.getUserId().then((function(t){return a.getPlaylistId(e,t)})).then((function(e){return a.addTracks(e,t)})):console.log("oops!")}},j=function(e){Object(u.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).addTrack=n.addTrack.bind(Object(l.a)(n)),n.removeTrack=n.removeTrack.bind(Object(l.a)(n)),n.updatePlaylistName=n.updatePlaylistName.bind(Object(l.a)(n)),n.savePlaylist=n.savePlaylist.bind(Object(l.a)(n)),n.search=n.search.bind(Object(l.a)(n)),n.state={searchResults:[],playlistName:"My Playlist",playlistTracks:[]},n}return Object(i.a)(a,[{key:"addTrack",value:function(e){var t=Array.from(this.state.playlistTracks);this.state.playlistTracks.find((function(t){return t.id===e.id}))||(t.push(e),this.setState({playlistTracks:t}))}},{key:"removeTrack",value:function(e){var t=this.state.playlistTracks.filter((function(t){return t.id!==e.id}));this.setState({playlistTracks:t})}},{key:"updatePlaylistName",value:function(e){this.setState({playlistName:e})}},{key:"savePlaylist",value:function(){var e=[];this.state.playlistTracks.map((function(t){return e.push(t.uri)})),g.savePlaylist(this.state.playlistName,e),this.setState({playlistTracks:[],playlistName:"New Playlist"})}},{key:"search",value:function(e){var t=this;g.search(e).then((function(e){t.setState({searchResults:e})}))}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h1",null,"Ja",s.a.createElement("span",{className:"highlight"},"mmm"),"ing"),s.a.createElement("div",{className:"App"},s.a.createElement(m,{search:this.search}),s.a.createElement("div",{className:"App-playlist"},s.a.createElement(f,{searchResults:this.state.searchResults,onAdd:this.addTrack}),s.a.createElement(k,{playlistName:this.state.playlistName,playlistTracks:this.state.playlistTracks,onRemove:this.removeTrack,onNameChange:this.updatePlaylistName,onSave:this.savePlaylist}))))}}]),a}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.ee35656c.chunk.js.map